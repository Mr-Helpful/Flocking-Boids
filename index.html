<!DOCTYPE html>
<html>

<head>
  <title>Alex Colby</title>
  <link rel="stylesheet" href="fonts/fonts.css">
  <link rel="stylesheet" href="css/controls.css">
  <script src="js/Vector.js"></script>
  <script src="js/Draw.js"></script>
  <script src="js/Word.js"></script>
  <script src="js/Control.js"></script>
  <script type="text/javascript">
    let settings = {}
    settings = {
      minV: 30,
      maxV: 50,
      maxA: 10,
      vRadius: 20,
      vAngle: -1,
      avoidR: 20,
      tWeight: 0.3,
      cWeight: 0.1, // centering weight
      fWeight: 1.0, // weight to avoid others
      aWeight: 1.0, // weight to align to others
      eWeight: 10.0, // weight from edges of canvas
      edges: true, // whether to enable edges on canvas
      wWeight: 20,
      colour: "#ccc",
      playing: true,
      N: 200
    }

    function MenuSetup() {
      let elem
      let slides = ["tWeight", "aWeight", "fWeight", "cWeight", "eWeight"]
      slides.map(id => {
        elem = document.getElementById(id)
        elem.value = settings[id] * 10
        elem.onchange = function() {
          settings[id] = elem.value / 10
        }
      })

      let switches = ["edges"]
      switches.map(id => {
        elem = document.getElementById(id)
        elem.checked = settings[id]
        elem.onchange = function() {
          settings[id] = elem.checked
        }
      })

      document.getElementById("play").onclick = () => {
        settings.playing = true
        step(Boids)
      }
      document.getElementById("step").onclick = () => {
        step(Boids)
      }
      document.getElementById("pause").onclick = () => {
        settings.playing = false
      }
    }
  </script>
  <script type="text/javascript" src="app.js" defer></script>
</head>

<body onload="init(); MenuSetup()">
  <input id='hidden' class='menu' type='checkbox'>
  <label id='close' class='menu tab' for='hidden'>
      <div>></div>
    </label>
  <div id='open' class='menu tab'>
    <</div>
      <div id='controls' class='menu controls'>
        <div id='title'>Controls</div>
        <table id='info'>
          <tr>
            <td>Target</td>
            <td id='tbl1'>
              <input id="tWeight" type="range" max="100">
            </td>
          </tr>
          <tr>
            <td>Align</td>
            <td id='tbl2'>
              <input id="aWeight" type="range" max="100">
            </td>
          </tr>
          <tr>
            <td>Avoid</td>
            <td id='tbl3'>
              <input id="fWeight" type="range" max="100">
            </td>
          </tr>
          <tr>
            <td>Center</td>
            <td id='tbl3'>
              <input id="cWeight" type="range" max="100">
            </td>
          </tr>
          <tr>
            <td>Edges</td>
            <td id='tbl3'>
              <input id="eWeight" type="range" max="100">
            </td>
          </tr>
        </table>
        <input id="edges" class="switch" type="checkbox">
        <label class="button" for="edges">Edges</label>
        <div id="flow" style="display: grid; padding: 0px">
          <img id="play" style="grid-column: 1/ span 1" class="media button" src="icons/Play.png"></img>
          <img id="pause" style="grid-column: 2/ span 1" class="media button" src="icons/Pause.png"></img>
          <img id="step" style="grid-column: 3/ span 1" class="media button" src="icons/Skip.png"></img>
          <!-- admittedly the setup for a image checkbox is probably overcomplicated -->
          <input id="timed" class="switch" type="checkbox">
          <label for="timed" class="media button" style="grid-column: 4/ span 1">
          <img class="media" src="icons/Time.png"></img>
        </label>
        </div>
      </div>
      <svg id="BoidGround" style="width:100vw; height:100vh"></svg>
</body>

</html>